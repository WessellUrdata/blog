---
import type { ImageMetadata } from "astro";
import { Picture } from "astro:assets";

interface Props {
  src: string;
  alt: string;
  classList?: string | undefined | null;
}

const { src, alt, classList } = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>("/src/assets/**/*.{jpeg,jpg,png,gif}");
if (!images[src]) throw new Error(`"${src}" does not exist in glob."`);
---

<Picture src={images[src]()} alt={alt} class={classList} formats={["avif", "jpg"]} />
